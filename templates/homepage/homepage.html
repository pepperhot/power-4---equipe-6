<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Accueil - Puissance 4</title>
        <link rel="stylesheet" href="/assets/styles/homepage_style/homepage_style.css?v=11">
        <link rel="stylesheet" href="/assets/styles/support_style/support_style.css">
    </head>
<body>
    <!-- Boutons Histoire et R√®gles en haut √† gauche -->
    <div class="history-button-container">
        <button id="historyBtn" class="btn-history" title="Histoire du Puissance 4">
            üìñ Histoire
        </button>
        <button id="rulesBtn" class="btn-history" title="R√®gles du jeu">
            üìã R√®gles
        </button>
    </div>
    
    <!-- Boutons Support en haut √† droite -->
    <div class="support-buttons-container">
        <button id="supportBtn" class="btn-support" title="Support">
            üí¨ Support
        </button>
        <button id="supportAdminBtn" class="btn-support btn-support-admin" title="Support Admin" style="display: none;">
            üõ†Ô∏è Support Admin
        </button>
    </div>
    <!-- Modal / panneau √©dition profil (cach√© par d√©faut) -->
    <div id="profileModal" class="profile-modal hidden" role="dialog" aria-modal="true" aria-labelledby="profileModalTitle">
        <div class="profile-modal-backdrop"></div>
        <div class="profile-modal-content">
            <div class="modal-header">
                <h2 id="profileModalTitle">
                    <span class="modal-icon">‚ú®</span>
                    Modifier le profil
                </h2>
                <button id="closeModalBtn" class="btn-close-modal" aria-label="Fermer">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <div class="modal-body">
                <!-- Section Avatar -->
                <div class="form-section avatar-section">
                    <label class="section-label">Photo de profil</label>
                    <div class="avatar-upload-container">
                        <div class="avatar-preview-wrapper">
                            <div class="avatar-preview-circle">
                                <img id="avatarPreview" src="" alt="Aper√ßu avatar">
                                <div class="avatar-placeholder">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                </div>
                            </div>
                            <div class="avatar-actions">
                                <label for="profileAvatarInput" class="btn-upload-avatar">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="17 8 12 3 7 8"></polyline>
                                        <line x1="12" y1="3" x2="12" y2="15"></line>
                                    </svg>
                                    Choisir une photo
                                </label>
                                <input type="file" id="profileAvatarInput" accept="image/*" style="display: none;">
                                <button id="removeAvatarBtn" type="button" class="btn-remove-avatar">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="3 6 5 6 21 6"></polyline>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                    </svg>
                                    Supprimer
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section Informations -->
                <div class="form-section">
                    <label class="section-label" for="profilePseudoInput">Pseudo</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <input type="text" id="profilePseudoInput" maxlength="20" placeholder="Votre pseudo">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-section">
                        <label class="section-label" for="profileFirstNameInput">Pr√©nom</label>
                        <div class="input-wrapper">
                            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <line x1="20" y1="8" x2="20" y2="14"></line>
                                <line x1="23" y1="11" x2="17" y2="11"></line>
                            </svg>
                            <input type="text" id="profileFirstNameInput" maxlength="30" placeholder="Pr√©nom">
                        </div>
                    </div>

                    <div class="form-section">
                        <label class="section-label" for="profileLastNameInput">Nom</label>
                        <div class="input-wrapper">
                            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <line x1="20" y1="8" x2="20" y2="14"></line>
                                <line x1="23" y1="11" x2="17" y2="11"></line>
                            </svg>
                            <input type="text" id="profileLastNameInput" maxlength="30" placeholder="Nom">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <label class="section-label" for="profileBioInput">Bio</label>
                    <div class="textarea-wrapper">
                        <svg class="input-icon textarea-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        <textarea id="profileBioInput" maxlength="160" placeholder="Parlez-nous un peu de vous... (optionnel)"></textarea>
                        <div class="char-counter">
                            <span id="bioCharCount">0</span>/160
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="cancelProfileBtn" class="btn-cancel">Annuler</button>
                <button id="saveProfileBtn" class="btn-save">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    Enregistrer
                </button>
            </div>
        </div>
    </div>

    <!-- Layout principal avec trois colonnes -->
    <div class="main-layout">
        <!-- Colonne gauche : Profil -->
        <div class="left-column">
            <div class="profile-section">
                <div class="profile-display">
                    <div class="profile-avatar-container">
                        <img id="profileAvatar" src="https://picsum.photos/seed/default-avatar/120/120.jpg" alt="Photo de profil">
                        <div class="profile-avatar-placeholder">
                            <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span>Aucune photo</span>
                        </div>
                    </div>
                    <div class="profile-info">
                        <div class="profile-names">
                            <span id="profilePseudoMain">Pseudo</span>
                        </div>
                        <div id="profilePseudo" class="profile-pseudo">@pseudo</div>
                        <div class="profile-xp-level">
                            <div class="level-display">
                                <span class="level-label">NIVEAU</span>
                                <span id="profileLevel" class="level-value">1</span>
                            </div>
                            <div class="xp-progress-container">
                                <div class="xp-progress-bar">
                                    <div id="xpProgressFill" class="xp-progress-fill"></div>
                                    <span id="xpRemaining" class="xp-remaining-text">0 XP pour NIVEAU 2</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="profile-actions">
                    <button id="editProfileBtn" class="btn-edit-profile">‚úèÔ∏è Modifier</button>
                    <a id="dashboardLink" href="/dashboard" class="btn-edit-profile btn-dashboard" style="display: none;">üîê Dashboard Admin</a>
                </div>
            </div>
        </div>

        <!-- Colonne centre : Menu de jeu -->
        <div class="center-column">
            <div class="game-menu">
                <h1>üéÆ Puissance 4</h1>
                <p>Choisissez votre mode de jeu</p>
                
                <div class="main-game-buttons">
                    <button type="button" class="btn-main-mode" id="btnVsAI">
                        <div class="btn-main-icon">ü§ñ</div>
                        <div class="btn-main-content">
                            <h2>Jouer contre l'IA</h2>
                            <p>Affrontez l'intelligence artificielle √† diff√©rents niveaux</p>
                        </div>
                    </button>
                    
                    <button type="button" class="btn-main-mode" id="btnVsPlayer">
                        <div class="btn-main-icon">üë•</div>
                        <div class="btn-main-content">
                            <h2>Mode 1V1</h2>
                            <p>Jouez contre un autre joueur en local</p>
                        </div>
                    </button>
                </div>

                <!-- Section IA (cach√©e par d√©faut) -->
                <div id="aiSection" class="game-section hidden">
                    <h2>ü§ñ Niveau de l'IA</h2>
                    
                    <div class="ai-level-buttons">
                        <button type="button" class="btn-ai-level" id="aiEasyBtn">Facile</button>
                        <button type="button" class="btn-ai-level" id="aiMediumBtn">Moyen</button>
                        <button type="button" class="btn-ai-level" id="aiHardBtn">Difficile</button>
                        <button type="button" class="btn-ai-level" id="aiImpossibleBtn">Impossible</button>
                    </div>

                    <div class="token-shop">
                        <h3>üé® Couleurs des jetons</h3>
                        <div class="player-colors">
                            <div class="color-selector">
                                <label for="player1-color">Joueur 1 :</label>
                                <input type="color" id="player1-color" value="#ff0000">
                            </div>
                            <div class="color-selector">
                                <label for="player2-color">Joueur 2 :</label>
                                <input type="color" id="player2-color" value="#ffff00">
                            </div>
                        </div>
                        <button class="btn-save-colors">Sauvegarder les couleurs</button>
                    </div>

                    <button type="button" class="btn-play" id="playBtnAI">üöÄ Commencer la partie</button>
                    <button type="button" class="btn-back" id="backFromAI">‚Üê Retour</button>
                </div>

                <!-- Section 1V1 (cach√©e par d√©faut) -->
                <div id="playerSection" class="game-section hidden">
                    <h2>üë• Mode 1V1</h2>
                    
                    <div class="mode-buttons">
                        <button type="button" class="btn-easy-mode" id="easyBtn">Facile</button>
                        <button type="button" class="btn-normale-mode" id="normalBtn">Normal</button>
                        <button type="button" class="btn-hard-mode" id="hardBtn">Difficile</button>
                        <button type="button" id="gravityBtn" class="btn-gravities-mode">Gravit√©</button>
                    </div>

                    <div class="token-shop">
                        <h3>üé® Couleurs des jetons</h3>
                        <div class="player-colors">
                            <div class="color-selector">
                                <label for="player1-color-1v1">Joueur 1 :</label>
                                <input type="color" id="player1-color-1v1" value="#ff0000">
                            </div>
                            <div class="color-selector">
                                <label for="player2-color-1v1">Joueur 2 :</label>
                                <input type="color" id="player2-color-1v1" value="#ffff00">
                            </div>
                        </div>
                        <button class="btn-save-colors">Sauvegarder les couleurs</button>
                    </div>

                    <button type="button" class="btn-play" id="playBtn1V1">üöÄ Commencer la partie</button>
                    <button type="button" class="btn-back" id="backFrom1V1">‚Üê Retour</button>
                </div>
            </div>
        </div>

        <!-- Colonne droite : Leaderboard -->
        <div class="right-column">
            <div class="leaderboard-section">
                <div class="leaderboard-header">
                    <h2>üèÜ Classement</h2>
                    <span class="leaderboard-subtitle">Top joueurs</span>
                </div>
                <div id="leaderboardList" class="leaderboard-list">
                    <div class="leaderboard-loading">Chargement...</div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // G√©rer l'affichage du placeholder de l'avatar
        document.addEventListener('DOMContentLoaded', function() {
            const avatar = document.getElementById('profileAvatar');
            const placeholder = document.querySelector('.profile-avatar-placeholder');
            const profilePseudoMain = document.getElementById('profilePseudoMain');
            const profilePseudoHandle = document.getElementById('profilePseudo');
            
            function updatePlaceholderVisibility() {
                if (avatar && placeholder) {
                    if (!avatar.src || avatar.src === '' || avatar.src.includes('about:blank') || avatar.src.includes('picsum.photos/seed/default-avatar')) {
                        placeholder.style.display = 'flex';
                    } else {
                        placeholder.style.display = 'none';
                    }
                }
            }
            
            // V√©rifier au chargement
            updatePlaceholderVisibility();

            // Charger le profil depuis la BDD pour afficher le vrai pseudo
            (async function loadProfile() {
                try {
                    const res = await fetch('/profile');
                    const data = await res.json();
                    if (data.success) {
                        if (profilePseudoMain) profilePseudoMain.textContent = data.pseudo || '';
                        if (profilePseudoHandle) profilePseudoHandle.textContent = data.pseudo ? ('@' + data.pseudo) : '';
                    }
                } catch (err) {
                    console.warn('Impossible de charger le profil sur la homepage', err);
                }
            })();
            
            // V√©rifier quand l'image change
            if (avatar) {
                avatar.addEventListener('load', updatePlaceholderVisibility);
                avatar.addEventListener('error', updatePlaceholderVisibility);
            }
            
            // G√©rer le bouton Modifier le profil
            const editProfileBtn = document.getElementById('editProfileBtn');
            const profileModal = document.getElementById('profileModal');
            const cancelProfileBtn = document.getElementById('cancelProfileBtn');
            const saveProfileBtn = document.getElementById('saveProfileBtn');
            
            function openProfileModal() {
                if (profileModal) {
                    profileModal.classList.remove('hidden');
                }
            }
            
            function closeProfileModal() {
                if (profileModal) {
                    profileModal.classList.add('hidden');
                }
            }
            
            if (editProfileBtn) {
                editProfileBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    openProfileModal();
                });
            }
            
            if (cancelProfileBtn) {
                cancelProfileBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    closeProfileModal();
                });
            }
            
            if (saveProfileBtn) {
                saveProfileBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    closeProfileModal();
                });
            }
            
            // G√©rer les boutons des modes de jeu
            // Note: La logique principale est g√©r√©e par le script externe homepage_srcipt.js
            // Ce script inline est conserv√© pour compatibilit√© mais ne devrait pas interf√©rer
            
            const btnEasy = document.getElementById('easyBtn');
            const btnNormal = document.getElementById('normalBtn');
            const btnHard = document.getElementById('hardBtn');
            const btnGravity = document.getElementById('gravityBtn');
            // Les boutons playBtn sont maintenant g√©r√©s par le script externe
            
            // Variables locales pour ce script (mais le script externe a la priorit√©)
            let selectedMode = '';
            let selectedAILevel = '';
            
            // Fonction pour obtenir selectedAILevel depuis le script externe si disponible
            function getSelectedAILevel() {
                // Essayer d'acc√©der √† la variable globale depuis le script externe
                if (typeof window.selectedAILevel !== 'undefined') {
                    return window.selectedAILevel;
                }
                // Sinon, v√©rifier les boutons IA visuellement
                const aiEasy = document.getElementById('aiEasyBtn');
                const aiMedium = document.getElementById('aiMediumBtn');
                const aiHard = document.getElementById('aiHardBtn');
                const aiImpossible = document.getElementById('aiImpossibleBtn');
                
                if (aiEasy && aiEasy.classList.contains('active')) return 'easy';
                if (aiMedium && aiMedium.classList.contains('active')) return 'medium';
                if (aiHard && aiHard.classList.contains('active')) return 'hard';
                if (aiImpossible && aiImpossible.classList.contains('active')) return 'impossible';
                return '';
            }
            
            // Fonction pour obtenir selectedMode depuis le script externe si disponible
            function getSelectedMode() {
                // Essayer d'acc√©der √† la variable globale depuis le script externe
                if (typeof window.selectedMode !== 'undefined') {
                    return window.selectedMode;
                }
                return selectedMode;
            }
            
            function setMode(mode) {
                selectedMode = mode;
                
                // Mettre √† jour les styles des boutons
                document.querySelectorAll('.mode-buttons button').forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                if (mode === 'easy' && btnEasy) {
                    btnEasy.classList.add('selected');
                } else if (mode === 'normal' && btnNormal) {
                    btnNormal.classList.add('selected');
                } else if (mode === 'hard' && btnHard) {
                    btnHard.classList.add('selected');
                } else if (mode === 'gravity' && btnGravity) {
                    btnGravity.classList.add('selected');
                }
            }
            
            function forceSelect(mode) {
                setMode(mode);
            }
            
            // Ajouter les √©v√©nements aux boutons
            if (btnEasy) btnEasy.addEventListener('click', () => setMode('easy'));
            if (btnNormal) btnNormal.addEventListener('click', () => setMode('normal'));
            if (btnHard) btnHard.addEventListener('click', () => setMode('hard'));
            if (btnGravity) {
                const onSelectGravity = (e) => { 
                    e.preventDefault(); 
                    forceSelect('gravity'); 
                };
                btnGravity.addEventListener('click', onSelectGravity);
                btnGravity.addEventListener('mousedown', onSelectGravity);
                btnGravity.addEventListener('touchstart', onSelectGravity, { passive: true });
            }
            
            // Les boutons Play sont maintenant g√©r√©s par le script externe homepage_srcipt.js
            
            // Aucun mode s√©lectionn√© par d√©faut - l'utilisateur doit choisir
            
            // La v√©rification du statut admin est g√©r√©e par le script externe homepage_srcipt.js
            // Pas besoin d'appeler checkAdminStatus() ici car elle est d√©j√† appel√©e dans le script externe
        });
    </script>
    <script src="/src/script/homepage/homepage_srcipt.js"></script>
    <script src="/src/script/support/support_script.js"></script>
    
    <!-- Pop-up de niveau atteint -->
    <div id="levelUpPopup" class="level-up-popup hidden">
        <div class="level-up-content">
            <div class="level-up-icon">üéâ</div>
            <h2 class="level-up-title">Niveau atteint !</h2>
            <div class="level-up-number" id="levelUpNumber">2</div>
            <p class="level-up-message">F√©licitations !</p>
        </div>
    </div>

    <!-- Modal Support - Cr√©ation de ticket -->
    <div id="supportModal" class="support-modal hidden">
        <div class="support-modal-backdrop"></div>
        <div class="support-modal-content">
            <div class="support-modal-header">
                <h2>üí¨ Support</h2>
                <button id="closeSupportModal" class="btn-close-support">√ó</button>
            </div>
            <div class="support-modal-body">
                <div id="supportCreateView" class="support-view hidden">
                    <h3>Cr√©er un nouveau ticket</h3>
                    <form id="createTicketForm">
                        <div class="form-group">
                            <label for="ticketType">Type de demande *</label>
                            <select id="ticketType" name="ticketType" required>
                                <option value="">S√©lectionnez un type</option>
                                <option value="question">Question g√©n√©rale</option>
                                <option value="password_reset">Mot de passe oubli√©</option>
                                <option value="hacked_account">Compte pirat√©</option>
                                <option value="bug">Signaler un bug</option>
                                <option value="feature">Demande de fonctionnalit√©</option>
                                <option value="other">Autre</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ticketSubject">Sujet *</label>
                            <input type="text" id="ticketSubject" name="subject" required placeholder="R√©sumez votre probl√®me en quelques mots">
                        </div>
                        <div class="form-group">
                            <label for="ticketMessage">Description d√©taill√©e *</label>
                            <textarea id="ticketMessage" name="message" rows="5" required placeholder="D√©crivez votre probl√®me en d√©tail..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="ticketPriority">Priorit√©</label>
                            <select id="ticketPriority" name="priority">
                                <option value="low">Basse</option>
                                <option value="medium" selected>Moyenne</option>
                                <option value="high">Haute</option>
                                <option value="urgent">Urgente</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-submit-ticket">Envoyer le ticket</button>
                    </form>
                </div>
                <div id="supportTicketsView" class="support-view">
                    <div class="support-tickets-header">
                        <h3>Mes tickets</h3>
                        <button id="btnNewTicket" class="btn-new-ticket">+ Nouveau ticket</button>
                    </div>
                    <div id="ticketsList" class="tickets-list"></div>
                </div>
                <div id="supportChatView" class="support-view hidden">
                    <div class="support-chat-header">
                        <button id="btnBackToTickets" class="btn-back-to-tickets">‚Üê Retour</button>
                        <h3 id="chatTicketSubject">Ticket #<span id="chatTicketId">0</span></h3>
                        <span id="chatTicketStatus" class="ticket-status-badge"></span>
                    </div>
                    <div id="chatMessages" class="chat-messages"></div>
                    <div class="chat-input-container">
                        <textarea id="chatMessageInput" placeholder="Tapez votre message..." rows="2"></textarea>
                        <button id="btnSendMessage" class="btn-send-message">Envoyer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Support Admin -->
    <div id="supportAdminModal" class="support-modal hidden">
        <div class="support-modal-backdrop"></div>
        <div class="support-modal-content support-admin-content">
            <div class="support-modal-header">
                <h2>üõ†Ô∏è Support Admin</h2>
                <button id="closeSupportAdminModal" class="btn-close-support">√ó</button>
            </div>
            <div class="support-modal-body">
                <div id="adminTicketsListView" class="support-view">
                    <div class="admin-tickets-filters">
                        <select id="adminFilterStatus">
                            <option value="">Tous les statuts</option>
                            <option value="open">Ouvert</option>
                            <option value="in_progress">En cours</option>
                            <option value="resolved">R√©solu</option>
                            <option value="closed">Ferm√©</option>
                        </select>
                        <select id="adminFilterType">
                            <option value="">Tous les types</option>
                            <option value="question">Question</option>
                            <option value="password_reset">Mot de passe</option>
                            <option value="hacked_account">Compte pirat√©</option>
                            <option value="bug">Bug</option>
                            <option value="feature">Fonctionnalit√©</option>
                            <option value="other">Autre</option>
                        </select>
                    </div>
                    <div id="adminTicketsList" class="admin-tickets-list"></div>
                </div>
                <div id="adminChatView" class="support-view hidden">
                    <div class="support-chat-header">
                        <button id="btnBackToAdminTickets" class="btn-back-to-tickets">‚Üê Retour</button>
                        <div>
                            <h3 id="adminChatTicketSubject">Ticket #<span id="adminChatTicketId">0</span></h3>
                            <p class="admin-ticket-user">Utilisateur: <span id="adminChatUserPseudo"></span></p>
                        </div>
                        <div class="admin-ticket-actions">
                            <select id="adminTicketStatusSelect">
                                <option value="open">Ouvert</option>
                                <option value="in_progress">En cours</option>
                                <option value="resolved">R√©solu</option>
                                <option value="closed">Ferm√©</option>
                            </select>
                            <button id="btnUpdateTicketStatus" class="btn-update-status">Mettre √† jour</button>
                        </div>
                    </div>
                    <div id="adminChatMessages" class="chat-messages"></div>
                    <div class="chat-input-container">
                        <textarea id="adminChatMessageInput" placeholder="Tapez votre r√©ponse..." rows="2"></textarea>
                        <button id="btnSendAdminMessage" class="btn-send-message">Envoyer</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Histoire du Puissance 4 -->
    <div id="historyModal" class="history-modal hidden">
        <div class="history-modal-backdrop"></div>
        <div class="history-modal-content">
            <div class="history-modal-header">
                <h2>üìñ Histoire du Puissance 4</h2>
                <button id="closeHistoryModal" class="btn-close-history">√ó</button>
            </div>
            <div class="history-modal-body">
                <div class="history-content">
                    <div class="history-intro">
                        <p>üåü D√©couvrez l'histoire fascinante du jeu qui a captiv√© des millions de joueurs √† travers le monde !</p>
                    </div>
                    
                    <h3>üéØ Origines</h3>
                    <p>Le Puissance 4, √©galement connu sous le nom de <strong>"Connect Four"</strong> en anglais, est un jeu de strat√©gie cr√©√© en <strong>1974</strong> par l'ing√©nieur am√©ricain <strong>Howard Wexler</strong> et le designer <strong>Ned Strongin</strong>. Le jeu a √©t√© commercialis√© par la soci√©t√© <strong>Milton Bradley</strong> (maintenant Hasbro) et est rapidement devenu un classique des jeux de soci√©t√©.</p>
                    
                    <h3>üéÆ Le Concept</h3>
                    <p>Le Puissance 4 est un jeu de soci√©t√© pour deux joueurs qui se joue sur une grille verticale de <strong>6 lignes et 7 colonnes</strong>. L'objectif est simple mais captivant : aligner <strong>4 jetons de sa couleur</strong> horizontalement, verticalement ou en diagonale avant son adversaire. La simplicit√© des r√®gles en fait un jeu accessible √† tous, tout en offrant une profondeur strat√©gique impressionnante.</p>
                    
                    <h3>üìã R√®gles du Jeu</h3>
                    <ul>
                        <li>Les joueurs alternent pour placer leurs jetons dans les colonnes</li>
                        <li>Les jetons tombent au plus bas de la colonne gr√¢ce √† la gravit√©</li>
                        <li>Le premier joueur √† aligner 4 jetons gagne la partie</li>
                        <li>Si la grille est remplie sans gagnant, c'est un match nul</li>
                    </ul>
                    
                    <h3>üß† Strat√©gie</h3>
                    <p>Le Puissance 4 est un jeu de strat√©gie o√π il faut √† la fois <strong>attaquer</strong> (cr√©er des alignements) et <strong>d√©fendre</strong> (emp√™cher l'adversaire de gagner). Les joueurs exp√©riment√©s anticipent plusieurs coups √† l'avance et cr√©ent des menaces multiples. C'est un jeu qui d√©veloppe la pens√©e logique et la capacit√© d'anticipation !</p>
                    
                    <h3>üîÑ Variantes</h3>
                    <p>Au fil des ann√©es, plusieurs variantes passionnantes ont √©t√© cr√©√©es :</p>
                    <ul>
                        <li><strong>Puissance 5</strong> : Aligner 5 jetons au lieu de 4 pour plus de d√©fi</li>
                        <li><strong>Puissance 4 en 3D</strong> : Version tridimensionnelle avec plusieurs niveaux</li>
                        <li><strong>Puissance 4 avec gravit√© invers√©e</strong> : Les jetons montent au lieu de descendre</li>
                    </ul>
                    
                    <h3>üíª Dans le Monde Num√©rique</h3>
                    <p>Avec l'av√®nement de l'informatique, le Puissance 4 est devenu un jeu classique pour tester les algorithmes d'intelligence artificielle. En <strong>1988</strong>, <strong>James D. Allen</strong> et <strong>Victor Allis</strong> ont prouv√© math√©matiquement que le premier joueur peut toujours gagner s'il joue parfaitement. Cette d√©couverte a marqu√© un tournant dans l'√©tude des jeux combinatoires.</p>
                    
                    <h3>‚ú® Fun Facts</h3>
                    <ul>
                        <li>Le jeu a √©t√© r√©solu math√©matiquement : le premier joueur peut toujours gagner avec une strat√©gie parfaite</li>
                        <li>Il existe plus de <strong>4 531 985 219 092</strong> positions possibles diff√©rentes</li>
                        <li>Le record du monde de parties jou√©es en une heure d√©passe les centaines</li>
                        <li>Le Puissance 4 est souvent utilis√© pour enseigner la programmation et l'intelligence artificielle</li>
                        <li>Des tournois internationaux sont organis√©s chaque ann√©e</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal R√®gles du Jeu -->
    <div id="rulesModal" class="history-modal hidden">
        <div class="history-modal-backdrop"></div>
        <div class="history-modal-content">
            <div class="history-modal-header">
                <h2>üìã R√®gles du Puissance 4</h2>
                <button id="closeRulesModal" class="btn-close-history">√ó</button>
            </div>
            <div class="history-modal-body">
                <div class="history-content">
                    <div class="history-intro">
                        <p>üéØ Apprenez √† jouer au Puissance 4 et devenez un ma√Ætre de la strat√©gie !</p>
                    </div>
                    
                    <h3>üéÆ Objectif du Jeu</h3>
                    <p>Le but du Puissance 4 est d'√™tre le premier joueur √† aligner <strong>4 jetons de sa couleur</strong> cons√©cutivement, que ce soit :</p>
                    <ul>
                        <li><strong>Horizontalement</strong> : 4 jetons c√¥te √† c√¥te sur une m√™me ligne</li>
                        <li><strong>Verticalement</strong> : 4 jetons l'un au-dessus de l'autre dans une m√™me colonne</li>
                        <li><strong>En diagonale</strong> : 4 jetons en diagonale (montante ou descendante)</li>
                    </ul>
                    
                    <h3>üìê Le Plateau de Jeu</h3>
                    <p>Le jeu se d√©roule sur une grille verticale compos√©e de :</p>
                    <ul>
                        <li><strong>6 lignes</strong> (rang√©es horizontales)</li>
                        <li><strong>7 colonnes</strong> (rang√©es verticales)</li>
                        <li>Soit un total de <strong>42 emplacements</strong> possibles</li>
                    </ul>
                    
                    <h3>üîÑ Comment Jouer</h3>
                    <ol>
                        <li><strong>Choisissez une colonne</strong> : √Ä votre tour, cliquez sur la colonne o√π vous souhaitez placer votre jeton</li>
                        <li><strong>La gravit√© agit</strong> : Votre jeton tombe automatiquement au plus bas de la colonne, dans la premi√®re case vide disponible</li>
                        <li><strong>Alternance</strong> : Les joueurs alternent leurs tours (rouge puis jaune, ou selon les couleurs choisies)</li>
                        <li><strong>Victoire</strong> : D√®s qu'un joueur aligne 4 jetons, la partie se termine et ce joueur remporte la victoire</li>
                    </ol>
                    
                    <h3>‚ö° R√®gles Importantes</h3>
                    <ul>
                        <li>Vous ne pouvez pas placer un jeton dans une colonne <strong>compl√®tement remplie</strong></li>
                        <li>Les jetons ne peuvent pas √™tre d√©plac√©s une fois plac√©s</li>
                        <li>Si toutes les colonnes sont remplies sans qu'aucun joueur n'ait align√© 4 jetons, c'est un <strong>match nul</strong></li>
                        <li>Le premier joueur a un l√©ger avantage, c'est pourquoi il est recommand√© d'alterner qui commence en cas de parties multiples</li>
                    </ul>
                    
                    <h3>üß† Strat√©gies de Base</h3>
                    <div class="strategy-tips">
                        <h4>üí° Conseils pour Gagner</h4>
                        <ul>
                            <li><strong>Contr√¥lez le centre</strong> : Les colonnes centrales offrent plus de possibilit√©s d'alignement</li>
                            <li><strong>Cr√©ez des menaces multiples</strong> : Forcez votre adversaire √† d√©fendre plusieurs alignements √† la fois</li>
                            <li><strong>Bloquez votre adversaire</strong> : Emp√™chez-le de compl√©ter ses alignements de 3 jetons</li>
                            <li><strong>Anticipez</strong> : Pensez √† vos prochains coups et √† ceux de votre adversaire</li>
                            <li><strong>√âvitez les pi√®ges</strong> : Ne laissez pas votre adversaire cr√©er des alignements en diagonale</li>
                        </ul>
                        
                        <h4>‚ö†Ô∏è Erreurs √† √âviter</h4>
                        <ul>
                            <li>Ne jouez pas uniquement au centre, variez vos colonnes</li>
                            <li>Ne n√©gligez pas la d√©fense, bloquez les menaces adverses</li>
                            <li>Ne laissez pas votre adversaire cr√©er des "double menaces" (deux alignements possibles en m√™me temps)</li>
                            <li>Ne remplissez pas une colonne sans strat√©gie</li>
                        </ul>
                    </div>
                    
                    <h3>üéØ Modes de Jeu Disponibles</h3>
                    <ul>
                        <li><strong>Mode Classique</strong> : Le Puissance 4 traditionnel avec gravit√© normale</li>
                        <li><strong>Mode Facile</strong> : Parfait pour d√©buter et apprendre les bases</li>
                        <li><strong>Mode Difficile</strong> : Pour les joueurs exp√©riment√©s cherchant un d√©fi</li>
                        <li><strong>Mode Gravit√©</strong> : Une variante avec des r√®gles de gravit√© modifi√©es</li>
                        <li><strong>Mode 1V1</strong> : Affrontez un ami en local</li>
                        <li><strong>Mode IA</strong> : D√©fiez l'intelligence artificielle √† diff√©rents niveaux</li>
                    </ul>
                    
                    <h3>üèÜ Syst√®me de Niveaux</h3>
                    <p>Gagnez de l'<strong>XP (Exp√©rience)</strong> en remportant des parties ! Plus vous gagnez, plus vous montez de niveau. Chaque victoire vous rapporte des points d'exp√©rience qui vous permettent de progresser dans le classement.</p>
                    
                    <h3>‚ú® Bonne Partie !</h3>
                    <p>Maintenant que vous connaissez les r√®gles, lancez-vous dans une partie et amusez-vous ! N'oubliez pas : la pratique rend parfait. Plus vous jouerez, plus vous d√©velopperez votre strat√©gie et votre capacit√© √† anticiper les coups de votre adversaire.</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>